<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cjw.dao.PermissionMapper">
  <resultMap id="BaseResultMap" type="com.cjw.po.Permission">
    <!--@mbg.generated-->
    <!--@Table t_permission-->
    <id column="permission_id" jdbcType="INTEGER" property="permissionId" />
    <result column="permission_name" jdbcType="VARCHAR" property="permissionName" />
    <result column="permission_info" jdbcType="VARCHAR" property="permissionInfo" />
    <result column="module_url" jdbcType="VARCHAR" property="moduleUrl" />
    <result column="pid" jdbcType="INTEGER" property="pid" />
  </resultMap>


  <sql id="Base_Column_List">
    <!--@mbg.generated-->
    permission_id, permission_name, permission_info, module_url, pid
  </sql>

<!--auto generated by MybatisCodeHelper on 2020-12-23-->
  <select id="findAllByUserId" resultMap="BaseResultMap">
        select distinct
        <include refid="Base_Column_List"/>
        from t_user_role
        inner join t_user tu on t_user_role.fk_user_id = tu.user_id
        inner join t_role_permission trp on t_user_role.fk_role_id = trp.fk_role_id
        inner join t_permission tp on trp.fk_permission_id = tp.permission_id
        where tu.user_id=#{userId,jdbcType=INTEGER} ;
    </select>
</mapper>